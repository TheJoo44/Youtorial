{% extends 'base_min.html' %}


{% block content %}

<h2 class="center">Profile Page</h2>

<div class="container">
  <div class="row">
    <div class="col s4 center">
      <div class="col s12 left">
        <div class="card grey white-text">
          {% if user.photo_set.all|length == 0 %}
            <div class="material-icons">
              <i class="material-icons circle blue">person</i>
            </div>
          {% elif user.photo_set.first %}
            <img class="responsive-img card-panel" src="{{photo.url}}">
          {% endif %}
            <form action="{% url 'add_photo' user.id %}" enctype="multipart/form-data" method="POST" class="card-panel black-text">
              {% csrf_token %}
              <input type="file" name="photo-file">
              <br><br>
              <input type="submit" class="btn" value="Upload Photo">
            </form>     
        </div>
      </div>
      <div class="col s12 left">
        <div class="card grey white-text">
          <h4 class="username">{{user.username}}</h4>
        </div>
      </div>
      <div class="col s12 left">
        <div class="card grey white-text">
          <h4 class="user-info">User Info</h4>
          <h5>Last Login: {{user.last_login}}</h5>
          <h5>Member Since: {{user.date_joined}}</h5>
        </div>
      </div>
    </div>
    <div class="col s8 right">
      <div class="col s10">
        <div class="card grey white-text card-panel">
          <h4 class= "completed-tutorial">Completed Tutorials</h4>
        </div>
      </div>
      <div class="col s10">
        <div class="card grey white-text card-panel">
          <h4 class= "saved-tutorial">Saved Tutorials</h4>
           {% for stats in stats %}
        <div>
            <p>{{level_status}}</p>
            <p>{{stats}}</p>
            <p>{{saved}}</p>
            <p>{{user}}</p>
            <p>{{tutorial}}</p>
        </div>
        {% endfor %}
        </div>
      </div>
      <div class="col s10">
        <div class="card grey white-text card-panel inline">
          <h4 class= "created-tutorial">Created Tutorials</h4>
          <div style="max-height: 800px; overflow: scroll">
          {% for tutorial in tutorials %}
            <div class="card black-text" style="padding: 10px">
            <div class="row">
              <div class="col s9">
                {{ tutorial.category }}
                <h6>{{ tutorial.title}}</h6>
              </div>
              <div class="col s3">
              
              <a href="{% url 'delete_tutorial' tutorial.id%}"><button class="btn red darken-4 right tooltipped" data-position="right" data-tooltip="Delete"><i class="material-icons">delete_forever</i></button>
              <br>
              <br>

              <a href="{% url 'edit_tutorial' tutorial.id %}"><button class="btn right tooltipped" data-position="right" data-tooltip="Edit"><i class="material-icons">edit</i></button></a>
              <br>
              <br>
              <a href="{% url 'detail' tutorial.id %}"><button class="btn right tooltipped blue lighten-1" data-position="right" data-tooltip="View"><i class="material-icons">pageview</i></button></a>

              </div>
            </div>
            </div>
          {% endfor %}
          </div>
        </div>
      </div>
    </div> 
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.tooltipped');
    var instances = M.Tooltip.init(elems);
  });
</script>
{% endblock  %}
